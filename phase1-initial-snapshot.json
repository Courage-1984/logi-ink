// Phase 1: Capture initial DOM state and navbar computed styles
const navbar = document.querySelector('.navbar');
const navLinks = document.querySelectorAll('.nav-link');
const snapshot = {
  timestamp: new Date().toISOString(),
  url: window.location.href,
  navbar: {
    outerHTML: navbar?.outerHTML.substring(0, 500),
    classes: Array.from(navbar?.classList || []),
    computedStyles: navbar ? {
      viewTransitionName: window.getComputedStyle(navbar).viewTransitionName,
      position: window.getComputedStyle(navbar).position,
      zIndex: window.getComputedStyle(navbar).zIndex,
      display: window.getComputedStyle(navbar).display,
      height: window.getComputedStyle(navbar).height,
      overflow: window.getComputedStyle(navbar).overflow,
      contain: window.getComputedStyle(navbar).contain
    } : null,
    boundingBox: navbar?.getBoundingClientRect()
  },
  navLinks: Array.from(navLinks).slice(0, 3).map(link => {
    const computed = window.getComputedStyle(link);
    return {
      text: link.textContent.trim(),
      classes: Array.from(link.classList),
      attributes: {
        dataNavInit: link.hasAttribute('data-nav-initialized'),
        dataActiveInit: link.hasAttribute('data-active-initialized')
      },
      computedStyles: {
        color: computed.color,
        backgroundColor: computed.backgroundColor,
        backgroundClip: computed.backgroundClip,
        webkitTextFillColor: computed.webkitTextFillColor,
        textShadow: computed.textShadow,
        position: computed.position,
        zIndex: computed.zIndex
      },
      appearsActive: computed.backgroundClip !== 'border-box' && computed.webkitTextFillColor === 'rgba(0, 0, 0, 0)',
      appearsHovered: computed.textShadow !== 'none' && computed.textShadow !== '' && computed.color !== 'rgb(176, 176, 176)'
    };
  }),
  viewTransition: {
    active: document.activeViewTransition !== null,
    supported: 'startViewTransition' in document
  }
};
JSON.stringify(snapshot, null, 2);
